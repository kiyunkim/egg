<style>
  .hidden {
    visibility: hidden;
  }
</style>

<p id="egg-count"></p>
<button id="egg-btn">get egg</button> <button id="egg-sell" disabled>sell eggs</button>
<p id="money-count" class="hidden">money: 0</p>
<p id="chicken-count" class="hidden"></p>

<script>
  var egg = {
    name: 'egg',
    html: document.getElementById('egg-count'),
    count: 0,
    button: document.getElementById('egg-btn'),
    unlock: [
      {
        atCount: 2,
        name: 'money'
      },
    ]
  };
  var money = {
    name: 'money',
    html: document.getElementById('money-count'),
    count: 0,
  };
  var chicken = {
    name: 'chicken',
    html: document.getElementById('chicken-count'),
    count: 0,
    cost: {
      type: money.name,
      amount: 20
    },
    produce: {
      type: egg.name,
      amount: 0.5
    },
  };

  var className = {
    hidden: 'hidden'
  }

  // loadSave();
  
  function updateCount(thing) {
    if (!thing.html.classList.contains(className.hidden)) {
      thing.html.innerHTML = thing.count;
    }
  }

  // clicker
  function addClickCount(thing) {
    thing.button.addEventListener('click', function() {
      thing.count++;
      updateCount(thing);
    unlock(egg, money); // this should be moved and made less manual
    });
  }
  addClickCount(egg);

  function checkIfArray(thing) {
    if (Array.isArray(thing)) {
      return true;
    } else {
      return false
    }
  }

  // unlock
  function unlock(unlockingThing, lockedThing) {
    // make sure locked thing is already hidden
    if (lockedThing.html.classList.contains(className.hidden)) {
      // is the locked thing in an array?
      if (checkIfArray(unlockingThing.unlock)) {
        // if yes, loop through array
        for (i = 0; i < unlockingThing.unlock.length; i++) {
          // check name and cost
          if ((lockedThing.name === unlockingThing.unlock[i].name) && (unlockingThing.count >= unlockingThing.unlock[i].atCount)) {
            lockedThing.html.classList.remove(className.hidden);
          }
        }
      } else {
        // no it's an object, not array
        if ((lockedThing.name === unlockingThing.unlock.name) && (unlockingThing.count >= unlockingThing.unlock[i].atCount)) {
          lockedThing.html.classList.remove(className.hidden);
        }
      }
    }
  }

  // set count
  // TODO: make this a loop
  updateCount(egg);
  updateCount(money);
  updateCount(chicken);

  
</script>